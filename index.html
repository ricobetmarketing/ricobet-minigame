<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Choose Your Adventure</title>

<!-- Preload (optional) -->
<link rel="preload" href="https://ricomx.ft-crm.com/media-api/serve/a450b16e-9310-4e83-ae66-ea71822a218b_9.png" as="image">
<link rel="preload" href="https://ricomx.ft-crm.com/media-api/serve/6959ee62-92fa-4192-a2d6-f678a4934b4f_8.png" as="image">

<style>
  :root{
    --ink:#eaf2ff; --muted:#9fb0d9;
    --pad: clamp(12px, 3.5vw, 28px);
    --island: clamp(128px, 34vw, 188px);
  }
  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{
    margin:0; min-height:100dvh; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    display:flex; align-items:center; justify-content:center;
    background:
      linear-gradient(rgba(10,12,28,.72), rgba(6,9,18,.82)),
      url("https://ricomx.ft-crm.com/media-api/serve/58ab892d-184a-4ec3-a286-bb43447ad417_BF_GIF_1.gif") center/cover no-repeat;
  }

  .wrap{ position:relative; height:100dvh; width:100%; max-width:1100px;
    padding: calc(var(--pad) + env(safe-area-inset-top)) var(--pad) calc(var(--pad) + env(safe-area-inset-bottom));
    display:grid; grid-template-rows:auto 1fr auto; gap: clamp(10px, 2.5vw, 22px);
    overflow:hidden; margin:0 auto; }

  header{ text-align:center; position:relative; z-index:2; pointer-events:none }
  h1{
    margin:0 0 6px; text-transform:uppercase; font-weight:900;
    font-size:clamp(22px,5.4vw,40px);
    background:linear-gradient(to right,#71e1ff,#25c3ff);
    -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
    text-shadow:0 0 8px #25c3ff, 0 0 22px #71e1ff, 0 0 42px rgba(113,225,255,.5);
  }
  p.sub{ margin:0; color:var(--muted); font-size:clamp(11px,2.6vw,14px); opacity:.9; }

  .road{ position:absolute; inset:0; z-index:0; pointer-events:none }
  @keyframes dash { to { stroke-dashoffset: -220; } }

  .island{
    position:absolute; z-index:1; width:var(--island); aspect-ratio:1/1; border-radius:50%;
    overflow:hidden; display:block; text-decoration:none; color:inherit;
    box-shadow:0 12px 28px rgba(0,0,0,.55);
    transition:transform .18s ease, box-shadow .18s ease;
    background: radial-gradient(70% 70% at 50% 45%, rgba(255,255,255,.06), rgba(10,12,28,.85) 70%) #0e1429;
  }
  .island:hover{ transform:translateY(-4px); box-shadow:0 16px 36px rgba(0,0,0,.6) }
  #slotIsland{ top:12%; right:6%; }
  #liveIsland{ bottom:12%; left:6%; }
  .island img{ width:100%; height:100%; object-fit:cover; display:block; }
  .island::after{
    content:""; position:absolute; inset:0;
    background:radial-gradient(75% 75% at 50% 55%, rgba(0,0,0,0), rgba(0,0,0,.22) 70%, rgba(0,0,0,.34) 100%);
  }
  .label{
    position:absolute; left:8px; right:8px; bottom:8px;
    display:flex; justify-content:space-between; align-items:center;
    padding:8px 10px; border-radius:12px;
    background:rgba(6,9,18,.62); backdrop-filter: blur(6px);
    font-weight:800; font-size:clamp(10px,2.3vw,13px);
    opacity:.78; transform:translateY(16%); transition: all .18s ease;
  }
  .island:hover .label{ transform:translateY(0); opacity:.95 }
  .cta{ border:0; border-radius:999px; padding:6px 12px;
    background:linear-gradient(to right,#71e1ff,#25c3ff); color:#061018; font-weight:900; }

  .disabled{ pointer-events:none }
  .disabled img{ filter:grayscale(1) brightness(.8); opacity:.9 }
  .disabled .label{ opacity:.45 }

  .note{ text-align:center; color:var(--muted); font-size:clamp(10px,2.5vw,12px); }

  /* Sound toggle button */
  #soundToggle{
    position:fixed; right:12px; bottom:12px; z-index:20;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(6,9,18,.6); backdrop-filter:blur(6px);
    color:#eaf2ff; font-weight:800; font-size:12px;
    border-radius:999px; padding:8px 12px; display:flex; gap:8px; align-items:center;
    box-shadow:0 8px 18px rgba(0,0,0,.45);
  }
  #soundToggle[aria-pressed="false"]{ opacity:.6 }
</style>
</head>
<body>
  <div class="wrap" id="wrap">
    <header>
      <h1>Choose Your Adventure</h1>
      <p class="sub">Pick your realm. After starting, youâ€™re locked to that realm.</p>
    </header>

    <!-- ROAD -->
    <svg class="road" id="road" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <linearGradient id="rg" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#71e1ff"/><stop offset="100%" stop-color="#25c3ff"/>
        </linearGradient>
      </defs>
      <path id="roadBase" fill="none" stroke="rgba(10,20,35,.9)" stroke-width="12"/>
      <path id="roadDash" fill="none" stroke="url(#rg)" stroke-width="2.8"
            stroke-dasharray="10 12" stroke-dashoffset="0"
            style="animation:dash 7s linear infinite;"/>
    </svg>

    <!-- ISLANDS -->
    <a id="slotIsland" class="island" href="slot2.html">
      <img src="https://ricomx.ft-crm.com/media-api/serve/53d0e66f-83b1-41be-8af8-56f3276ccfcd_3.png" alt="">
      <div class="label"><span>QUICKSAND â€¢ Slot</span><span class="cta">Enter</span></div>
    </a>
    <a id="liveIsland" class="island" href="live.html">
      <img src="https://ricomx.ft-crm.com/media-api/serve/21e2d774-ba12-4cf7-8a44-cec54ff7b4b7_4.png" alt="">
      <div class="label"><span>HOTSTONE â€¢ Live</span><span class="cta">Enter</span></div>
    </a>
    <p id="lockMsg" class="note"></p>
  </div>

  <!-- ðŸŽµ Background Music -->
  <audio id="bgm" src="assets/audio/theme.mp3" preload="auto" loop playsinline></audio>
  <button id="soundToggle" aria-pressed="false" hidden>ðŸ”Š Sound</button>

  <script src="assets/common.js"></script>
  <script>
    // ====== lock logic unchanged ======
    const chosen = typeof getChoice==="function" ? getChoice() : null;
    const msg = document.getElementById('lockMsg');
    if (chosen) {
      if (chosen === 'slot') document.getElementById('liveIsland').classList.add('disabled');
      if (chosen === 'live') document.getElementById('slotIsland').classList.add('disabled');
      msg.textContent = `Locked to: ${chosen.toUpperCase()}`;
    } else { msg.textContent = 'No lock yet â€” you can enter either realm.'; }

    // ====== draw road ======
    function center(r){ return {x:(r.left+r.right)/2,y:(r.top+r.bottom)/2}; }
    function drawRoad(){
      const wb=document.getElementById('wrap').getBoundingClientRect();
      const a=center(document.getElementById('slotIsland').getBoundingClientRect());
      const b=center(document.getElementById('liveIsland').getBoundingClientRect());
      const ax=a.x-wb.left, ay=a.y-wb.top, bx=b.x-wb.left, by=b.y-wb.top;
      const d=`M ${ax} ${ay} C ${ax-120} ${ay+180}, ${bx+120} ${by-180}, ${bx} ${by}`;
      roadBase.setAttribute('d',d); roadDash.setAttribute('d',d);
    }
    window.addEventListener('load',drawRoad); window.addEventListener('resize',drawRoad);

    // ====== background music ======
    (function(){
      const audio=document.getElementById('bgm');
      const btn=document.getElementById('soundToggle');
      const KEY='bgmConsent';
      const pref=localStorage.getItem(KEY)!=='off';

      function showBtn(){ btn.hidden=false; }
      function setUI(on){ btn.setAttribute('aria-pressed',on?'true':'false'); }

      async function boot(){
        try{ audio.muted=true; await audio.play(); }catch(e){}
        showBtn(); setUI(!audio.paused);
        if(pref){ document.addEventListener('click',()=>{audio.muted=false;setUI(true);},{once:true}); }
      }
      btn.addEventListener('click',async()=>{
        if(audio.paused){ await audio.play(); audio.muted=false; localStorage.setItem(KEY,'on'); setUI(true);}
        else{ audio.pause(); localStorage.setItem(KEY,'off'); setUI(false);}
      });
      window.addEventListener('load',boot,{once:true});
    })();
  </script>
</body>
</html>
