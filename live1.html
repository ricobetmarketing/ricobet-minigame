<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Live Realm — Roulette Spin Voucher</title>
<style>
  :root{ --bg:#0a0f1e; --ink:#eaf2ff; --mut:#9fb0d9; --g1:#71e1ff; --g2:#25c3ff; }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--ink);background:radial-gradient(1200px 800px at 70% -10%, #18244d 0%, #0a0f1e 55%, #05070d 100%);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;display:flex;align-items:center;justify-content:center;padding:20px}
  a.back{position:fixed;left:12px;top:12px;z-index:10;text-decoration:none;background:rgba(0,0,0,.5);padding:8px 12px;border-radius:10px;color:#fff;font-weight:700}
  .wrap{width:min(980px,96vw)}
  .card{position:relative;border-radius:22px;padding:18px;background:linear-gradient(180deg,#1b2a56,#0f1832);outline:1px solid rgba(255,255,255,.08);box-shadow:0 16px 60px rgba(0,0,0,.55)}
  .card::before{content:"";position:absolute;inset:0;border-radius:22px;pointer-events:none;background:conic-gradient(from 210deg at 50% 0%, rgba(255,255,255,.18), transparent 30%),linear-gradient(180deg, rgba(255,255,255,.06), transparent 30%)}
  h1{margin:0 0 8px;font-size:20px;font-weight:900;text-transform:uppercase;letter-spacing:.4px}
  p.sub{margin:0 6px 18px;color:var(--mut)}
  .grid{display:grid;grid-template-columns:1fr;gap:18px;align-items:center;justify-items:center}
  .wheelWrap{position:relative;width:min(520px,86vw);aspect-ratio:1/1}
  .wheel{position:absolute;inset:0;border-radius:50%;display:grid;place-items:center;background:radial-gradient(closest-side,#0e1633 0%,#0a122a 65%,#060b1c 100%);box-shadow:inset 0 0 60px rgba(0,0,0,.6), 0 0 60px rgba(113,225,255,.18), 0 0 80px rgba(192,107,255,.16);overflow:hidden}
  .slices{position:absolute;inset:10px;border-radius:50%}
  .slice{position:absolute;left:50%;top:50%;transform-origin:0% 0%;width:50%;height:50%;clip-path:polygon(0 0,100% 0,0 100%);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:clamp(10px,2.8vw,14px);color:#fff;text-align:center;text-shadow:0 2px 8px rgba(0,0,0,.6)}
  .slice .label{transform:translate(-60%,-20%) rotate(45deg);width:110px;line-height:1.15}
  .ring{position:absolute;inset:0;border-radius:50%;border:10px solid transparent}
  .ring::before,.ring::after{content:"";position:absolute;inset:-10px;border-radius:50%;border:10px solid #8a5dff;filter:blur(10px);opacity:.8;animation:tube 6s linear infinite}
  .ring::after{inset:-20px;border-color:#56d0ff;filter:blur(16px);opacity:.45;animation-direction:reverse}
  @keyframes tube{0%{border-color:#8a5dff}33%{border-color:#ff4de1}66%{border-color:#56d0ff}100%{border-color:#8a5dff}}
  .pin{position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:18px solid #ffea9a;filter:drop-shadow(0 0 10px rgba(255,220,120,.9))}
  .centerBtn{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border:0;border-radius:999px;padding:14px 22px;font-weight:900;letter-spacing:.4px;background:linear-gradient(to right,var(--g1),var(--g2));color:#061018;box-shadow:0 0 22px rgba(120,200,255,.8), inset 0 -3px 0 rgba(0,0,0,.35);cursor:pointer;z-index:2}
  .centerBtn:disabled{opacity:.55;pointer-events:none}
  .code{margin-top:10px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;letter-spacing:.5px;padding:10px 12px;border-radius:12px;background:#0a0d1a;outline:1px dashed rgba(160,220,255,.35);display:none}
  .row{display:flex;gap:10px;justify-content:center;margin-top:10px}
  .copy,.backHome{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;font-weight:900}
  .copy{background:#2b2b2b;color:#fff}.backHome{background:#fff;color:#111}
  .note{margin:6px 6px 0;color:var(--mut);font-size:12px;text-align:center}
</style>
</head>
<body>
  <a class="back" href="index.html">← Back</a>
  <div class="wrap">
    <div class="card">
      <h1>Roulette Spin Voucher</h1>
      <p class="sub">You have one spin. Hit SPIN to reveal your reward — this locks you to <b>Live</b> for this event.</p>
      <div class="grid">
        <div class="wheelWrap">
          <div class="pin" aria-hidden="true"></div>
          <div class="wheel">
            <div class="ring" aria-hidden="true"></div>
            <div class="slices" id="slices"></div>
            <button class="centerBtn" id="spinBtn">SPIN</button>
          </div>
        </div>
        <div class="code" id="codeBox">LIVE-XXXX</div>
        <div class="row">
          <button class="copy" id="copyBtn" style="display:none">Copy Code</button>
          <button class="backHome" id="homeBtn" style="display:none" onclick="location.href='index.html'">Home</button>
        </div>
        <div class="note">Admin: edit <code>REWARDS</code> in this file. For production, validate server-side.</div>
      </div>
    </div>
  </div>

<script src="assets/common.js"></script>
<script>
const c=getChoice(); if(c && c!=='live'){ alert('You already started Slot. Live is locked for this event.'); location.replace('index.html'); }
const REWARDS=[{label:'Poker Bonus',code:'POKER-ACE-9X5'},{label:'Cashback 10%',code:'LIVE-CASH-10'},{label:'VIP Ticket',code:'VIP-TICKET-01'},{label:'Bonus Boost',code:'LIVE-BOOST-20'},{label:'Cashback 15%',code:'LIVE-CASH-15'},{label:'Lucky Spin',code:'LIVE-LUCKY-1'},{label:'Surprise Box',code:'LIVE-BOX-7'},{label:'High Roller Chip',code:'LIVE-HR-25'}];
const CLAIM_KEY='live_roulette_claimed_v1';
const slicesEl=document.getElementById('slices'); const N=REWARDS.length;
REWARDS.forEach((r,i)=>{ const deg=(360/N)*i; const el=document.createElement('div'); el.className='slice'; el.style.transform=`translate(-50%,-50%) rotate(${deg}deg)`; el.style.background= i%2 ? 'linear-gradient(180deg,#1a3a7a,#12224f)' : 'linear-gradient(180deg,#7a1a68,#3a144f)'; el.innerHTML=`<div class="label">${r.label}</div>`; slicesEl.appendChild(el); });
const spinBtn=document.getElementById('spinBtn'), codeBox=document.getElementById('codeBox'), copyBtn=document.getElementById('copyBtn'), homeBtn=document.getElementById('homeBtn');
let spun=false; const prior=localStorage.getItem(CLAIM_KEY); if(prior){ finalize(JSON.parse(prior).code); spun=true; spinBtn.disabled=true; }
function spinOnce(){ if(spun) return; setChoice('live'); spun=true; spinBtn.disabled=true; const idx=Math.floor(Math.random()*N); const targetDeg=360-(360/N)*idx-(360/(N*2)); const turns=5+Math.floor(Math.random()*2); const total=turns*360+targetDeg; const start=performance.now(), dur=4200;
  function anim(t){ const p=Math.min(1,(t-start)/dur), e=1-Math.pow(1-p,3); slicesEl.style.transform=`rotate(${e*total}deg)`; if(p<1) requestAnimationFrame(anim); else { const reward=REWARDS[idx]; localStorage.setItem(CLAIM_KEY, JSON.stringify({code:reward.code, ts:Date.now(), idx})); finalize(reward.code); } }
  requestAnimationFrame(anim);
}
function finalize(code){ codeBox.style.display='inline-block'; codeBox.textContent=code; copyBtn.style.display='inline-block'; homeBtn.style.display='inline-block'; }
copyBtn.addEventListener('click',()=>{ const t=codeBox.textContent.trim(); if(!t) return; navigator.clipboard.writeText(t).then(()=>{ copyBtn.textContent='Copied!'; setTimeout(()=>copyBtn.textContent='Copy Code',1200); });});
spinBtn.addEventListener('click',spinOnce);
</script>
</body>
</html>
